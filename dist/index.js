var s=Object.defineProperty;var b=n=>s(n,"__esModule",{value:!0});var g=(n,r)=>{b(n);for(var e in r)s(n,e,{get:r[e],enumerable:!0})};g(exports,{levelPrefix:()=>o,shape:()=>f,toString:()=>h});function p(n,r){return JSON.stringify(n)===JSON.stringify(r)}function d(n){return JSON.parse(JSON.stringify(n))}var k={kind:"scalar",name:"null"};function o(n){return[...Array(n*2).keys()].map(r=>" ").join("")}function h(n,r=0){switch(n.kind){case"scalar":return o(r)+n.name;case"array":return o(r)+`Array of
`+h(n.children,r+1);case"object":return o(r)+(`Object with
`+Object.keys(n.children).map(e=>`${o(r+1)}'${e}' of
${h(n.children[e],r+2)}`).join(`,
`));case"varied":return n.children.map(e=>h(e,r)).join(` or
`);case"unknown":return o(r)+"Unknown"}}function y(n,r){let e=[n];for(;e;){let t=e.pop();if(t.kind==="varied"&&t.children.map(c=>e.push(c)),r(t))break}}function u(n,r){if(!n)return r;if(n.kind==="varied"){let t=n,c=!1;if(y(t,i=>{if(p(i,r))return c=!0,!0}),c)return t}return{kind:"varied",children:[d(n),r]}}function j(n,r){let e={kind:"varied",children:[]};for(let t of[n,r])y(t,c=>{e=u(e,c)});return e}function m(n,r){let e=Object.keys(n.children),t=Object.keys(r.children),c={kind:"object",children:{}};for(let i=0;i<e.length;i++){let a=e[i];if(t.includes(a)){c.children[a]=l([n.children[a],r.children[a]]).children;continue}c.children[a]=u(n.children[a],k)}for(let i=0;i<t.length;i++){let a=t[i];if(!e.includes(a)){c.children[a]=u(r.children[a],k);continue}}return c}function S(n,r){if(!r||n<=r)return[...Array(n).keys()].map((t,c)=>c);let e=[];for(;e.length<r;){let t=Math.floor(Math.random()*(n-1))+1;e.indexOf(t)===-1&&e.push(t)}return e}function l(n,r){let e={kind:"array",children:{kind:"unknown"}};if(!n.length)return e;let t=S(n.length,r||n.length);e.children=n[0];for(let c=0;c<t.length;c++){let i=n[t[c]];if(!p(e.children,i)){if(i.kind==="object"&&e.children.kind==="object"){e.children=m(d(e.children),i);continue}if(i.kind==="array"&&e.children.kind==="array"){e.children=l([d(e.children).children,i.children]);continue}if(i.kind==="varied"&&e.children.kind==="varied"){e.children=j(i,d(e.children));continue}if(i.kind===e.children.kind&&i.kind!=="scalar")throw new Error(`Missing type equality condition for ${i.kind} merge.`);e.children=u(e.children,i)}}return e}function O(n,r){let e=n.map(t=>f(t,r));return l(e,r)}function A(n,r){let e=Object.keys(n),t=S(e.length,r),c={kind:"object",children:{}};for(let i=0;i<t.length;i++){let a=e[t[i]];c.children[a]=f(n[a],r)}return c}function f(n,r=5e3){try{return Array.isArray(n)?O(n,r):n===null?{kind:"scalar",name:"null"}:typeof n=="object"?A(n,r):typeof n=="number"?{kind:"scalar",name:"number"}:typeof n=="bigint"?{kind:"scalar",name:"bigint"}:typeof n=="undefined"?{kind:"scalar",name:"null"}:typeof n=="boolean"?{kind:"scalar",name:"boolean"}:{kind:"scalar",name:"string"}}catch(e){return console.error(e),{kind:"unknown"}}}0&&(module.exports={levelPrefix,shape,toString});
//# sourceMappingURL=index.js.map
