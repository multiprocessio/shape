var p=Object.defineProperty;var b=n=>p(n,"__esModule",{value:!0});var g=(n,r)=>{b(n);for(var e in r)p(n,e,{get:r[e],enumerable:!0})};g(exports,{levelPrefix:()=>d,shape:()=>s,toString:()=>h});function l(n,r){return JSON.stringify(n)===JSON.stringify(r)}function o(n){return JSON.parse(JSON.stringify(n))}var k={kind:"scalar",name:"null"};function d(n){return[...Array(n*2).keys()].map(r=>" ").join("")}function h(n,r=0){switch(n.kind){case"scalar":return d(r)+n.name;case"array":return d(r)+`Array of
`+h(n.children,r+1);case"object":return d(r)+(`Object with
`+Object.keys(n.children).map(e=>`${d(r+1)}'${e}' of
${h(n.children[e],r+2)}`).join(`,
`));case"varied":return n.children.map(e=>h(e,r)).join(` or
`);case"unknown":return d(r)+"Unknown"}}function j(n,r){let e={kind:"varied",children:n.children.slice()};for(let t of r.children)for(let c of n.children)l(t,c)||e.children.push(t);return e}function m(n,r){let e=Object.keys(n.children),t=Object.keys(r.children),c={kind:"object",children:{}};for(let i=0;i<e.length;i++){let a=e[i];if(t.includes(a)){c.children[a]=f([n.children[a],r.children[a]]).children;continue}c.children[a]=u(n.children[a],k)}for(let i=0;i<t.length;i++){let a=t[i];if(!e.includes(a)){c.children[a]=u(r.children[a],k);continue}}return c}function y(n,r){if(!r||n<=r)return[...Array(n).keys()].map((t,c)=>c);let e=[];for(;e.length<r;){let t=Math.floor(Math.random()*(n-1))+1;e.indexOf(t)===-1&&e.push(t)}return e}function u(n,r){if(!n)return r;if(n.kind==="varied"){let t=n,c=[t],i=!1;for(;c;){let a=c.pop();if(a.kind==="varied"&&a.children.map(S=>c.push(S)),l(a,r)){i=!0;break}}if(i)return t}return{kind:"varied",children:[o(n),r]}}function f(n,r){let e={kind:"array",children:{kind:"unknown"}};if(!n.length)return e;let t=y(n.length,r||n.length);e.children=n[0];for(let c=0;c<t.length;c++){let i=n[t[c]];if(!l(e.children,i)){if(i.kind==="object"&&e.children.kind==="object"){e.children=m(o(e.children),i);continue}if(i.kind==="array"&&e.children.kind==="array"){e.children=f([o(e.children).children,i.children]);continue}if(i.kind==="varied"&&e.children.kind==="varied"){e.children=j(i,o(e.children));continue}if(i.kind===e.children.kind&&i.kind!=="scalar")throw new Error(`Missing type equality condition for ${i.kind} merge.`);e.children=u(e.children,i)}}return e}function O(n,r){let e=n.map(t=>s(t,r));return f(e,r)}function A(n,r){let e=Object.keys(n),t=y(e.length,r),c={kind:"object",children:{}};for(let i=0;i<t.length;i++){let a=e[t[i]];c.children[a]=s(n[a],r)}return c}function s(n,r=5e3){try{return Array.isArray(n)?O(n,r):n===null?{kind:"scalar",name:"null"}:typeof n=="object"?A(n,r):typeof n=="number"?{kind:"scalar",name:"number"}:typeof n=="bigint"?{kind:"scalar",name:"bigint"}:typeof n=="undefined"?{kind:"scalar",name:"null"}:typeof n=="boolean"?{kind:"scalar",name:"boolean"}:{kind:"scalar",name:"string"}}catch(e){return console.error(e),{kind:"unknown"}}}0&&(module.exports={levelPrefix,shape,toString});
//# sourceMappingURL=index.js.map
