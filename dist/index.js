var k=Object.defineProperty;var g=n=>k(n,"__esModule",{value:!0});var b=(n,r)=>{g(n);for(var e in r)k(n,e,{get:r[e],enumerable:!0})};b(exports,{levelPrefix:()=>o,merge:()=>u,shape:()=>p,toString:()=>d});function l(n,r){return JSON.stringify(n)===JSON.stringify(r)}function f(n){return JSON.parse(JSON.stringify(n))}var y={kind:"scalar",name:"null"};function o(n){return[...Array(n*2).keys()].map(r=>" ").join("")}function d(n,r=0){switch(n.kind){case"scalar":return o(r)+n.name;case"array":return o(r)+`Array of
`+d(n.children,r+1);case"object":{let e=Object.keys(n.children);return o(r)+("Object "+(e.length?`with
`+e.map(i=>`${o(r+1)}'${i}' of
${d(n.children[i],r+2)}`).join(`,
`):"(empty)"))}case"varied":return n.children.map(e=>d(e,r)).join(` or
`);case"unknown":return o(r)+"Unknown"}}function s(n,r){let e=[n];for(;e.length;){let i=e.pop();if(i.kind==="varied"&&i.children.map(c=>e.push(c)),r(i))break}}function h(n,r){if(!n||n.kind==="varied"&&(!n.children||!n.children.length))return r;if(n.kind==="varied"){let i=n,c=!1;if(s(i,t=>{if(r.kind==="varied"&&(s(r,a=>{if(l(t,a))return c=!0,!0}),c))return!0;if(l(t,r))return c=!0,!0}),c)return i}return{kind:"varied",children:[n,r]}}function j(n,r){let e={kind:"varied",children:[]};for(let i of[n,r])s(i,c=>{e=h(e,c)});return e}function m(n,r){let e=Object.keys(n.children),i=Object.keys(r.children),c={kind:"object",children:{}};for(let t=0;t<e.length;t++){let a=e[t];if(i.includes(a)){c.children[a]=u([n.children[a],r.children[a]]).children;continue}c.children[a]=h(n.children[a],y)}for(let t=0;t<i.length;t++){let a=i[t];if(!e.includes(a)){c.children[a]=h(r.children[a],y);continue}}return c}function S(n,r){if(!r||n<=r)return[...Array(n).keys()].map((i,c)=>c);let e=[];for(;e.length<r;){let i=Math.floor(Math.random()*(n-1))+1;e.indexOf(i)===-1&&e.push(i)}return e}function u(n,r){let e={kind:"array",children:{kind:"unknown"}};if(!n.length)return e;let i=S(n.length,r||n.length);e.children=n[0];for(let c=0;c<i.length;c++){let t=n[i[c]];if(!l(e.children,t)){if(t.kind==="object"&&e.children.kind==="object"){e.children=m(f(e.children),t);continue}if(t.kind==="array"&&e.children.kind==="array"){e.children=u([f(e.children).children,t.children]);continue}if(t.kind==="varied"&&e.children.kind==="varied"){e.children=j(t,f(e.children));continue}if(t.kind===e.children.kind&&t.kind!=="scalar")throw new Error(`Missing type equality condition for ${t.kind} merge.`);e.children=h(e.children,t)}}return e}function O(n,r){let e=n.map(i=>p(i,r));return u(e,r)}function A(n,r){let e=Object.keys(n),i=S(e.length,r),c={kind:"object",children:{}};for(let t=0;t<i.length;t++){let a=e[i[t]];c.children[a]=p(n[a],r)}return c}function p(n,r=5e3){try{return Array.isArray(n)?O(n,r):n===null?{kind:"scalar",name:"null"}:typeof n=="object"?A(n,r):typeof n=="number"?{kind:"scalar",name:"number"}:typeof n=="bigint"?{kind:"scalar",name:"bigint"}:typeof n=="undefined"?{kind:"scalar",name:"null"}:typeof n=="boolean"?{kind:"scalar",name:"boolean"}:{kind:"scalar",name:"string"}}catch(e){return console.error(e),{kind:"unknown"}}}0&&(module.exports={levelPrefix,merge,shape,toString});
//# sourceMappingURL=index.js.map
